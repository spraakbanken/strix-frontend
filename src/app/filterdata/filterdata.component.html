<div class="left_column" *ngIf="!openDocument && gotMetadata">
    <!-- <ul class="nav nav-tabs bg-light" id="myTab" role="tablist" style="padding: 0px 10px 2px 10px; background-color: #d9eaeb">
      <li class="nav-item" style="padding: 4px 0px 0px 10px;">
        <a class="nav-link active" id="basicFilter-tab" data-toggle="tab" href="#basicFilter" role="tab" aria-controls="basicFilter" aria-selected="true" [active]="selectedTab" (click)="selectSearch('basicFilter')">{{ 'text_attributes' | loc }}</a>
      </li>
      <!- <li class="nav-item" style="padding: 4px 0px 0px 10px;">
        <a class="nav-link" id="advanceFilter-tab" data-toggle="tab" href="#advanceFilter" role="tab" aria-controls="advanceFilter" aria-selected="false" (click)="selectSearch('advanceFilter')">Advance Filters</a>
      </li> ->
    </ul> -->
    <div class="attributeArea" style="flex: 0 0 30%; max-width: 100%; width: 100%; margin: 0px;">
        <mat-accordion class="right_accordion" *ngIf="basicFilter">
            <div style="padding-bottom: 20px;">
                <mat-accordion>
                    <mat-expansion-panel expanded>
                        <mat-expansion-panel-header style="height: 50px; padding: 0px; background-color: #d9eaeb; border-radius: 0.3em;">
                          <mat-panel-title style="padding-left: 12px; padding-top: 8px; font-size: medium; font-style: italic; color: chocolate">
                            {{ 'add_filter' | loc }}<!--<mat-icon style="padding-right: 30px; font-size: 20px;">add_circle</mat-icon>-->
                          </mat-panel-title>
                        </mat-expansion-panel-header>
                        <div class="extraInput" style="padding: 4px 4px 4px 4px; display: inline-table; height: 40px; width: 100%;" *ngIf="(basicFacets | keyvalue)?.length">
                          <!-- <mat-form-field appearance="outline" style="width: 160px; max-width:200px; padding-top: 0px; border: 0.5px solid #ddd; border-radius: 4px;">
                            <!- <mat-label>Filter</mat-label> ->
                            <input [(ngModel)]="searchText" matInput minlength="2" style="background-color: transparent;"  (keyup)="onSearchText()" placeholder="" #input>
                          </mat-form-field> -->
                          <button class="closeButtonX" mat-button style="margin-left: 10px;">{{ 'sidebar_text_attributes' | loc }}</button>
                          <button style="float: right;" class="closeButton d-none d-lg-block" mat-button (click)="defaultFacets()">{{ 'default' | loc }}</button>
                          <button style="float: right;" class="closeButton d-none d-lg-block" mat-button (click)="deselectFacets()">{{ 'selectNone' | loc }}</button>
                        </div>
                        <div class="text_annotations_list">
                          <!-- <button class="closeButtonX" mat-button style="margin-left: 10px;">Text attributes</button> -->
                          <!-- <input matInput [(ngModel)]="searchText" placeholder="filter data" autocomplete="off" (input)="onSearchText()"> -->
                            <mat-selection-list [(ngModel)]="selectedOptions" (selectionChange)="selectFacet($event)" multiple  style="overflow-y: scroll; height: auto; max-height: 20.2vh; overflow-x: hidden;">
                                <mat-list-option checkboxPosition="before" *ngFor="let item of resultFacet | keyvalue" [value]="item.key">
                                    <span style="color: steelblue">{{ item.key | loc }}</span>
                                </mat-list-option>
                            </mat-selection-list>
                        </div>
                      </mat-expansion-panel>
                </mat-accordion>
            </div>
            <div *ngIf="!openDocument && gotMetadata && selectedFilters.length > 0"> <!--style="padding: 10px 10px 10px 0px; display: inline-flex; flex-wrap: wrap; height: 40px;"-->
                <div style="height: 50px; background-color: #d9eaeb; padding-top: 12px; border-radius: 0.3em;">
                    <span *ngIf="showFilters" style="font-size: medium; font-style: italic; padding-left: 10px; color: chocolate;">{{ 'selected_filters' | loc }}</span>
                </div>
            <div class="selectFilterArea" style="padding: 10px 10px 10px 0px; display: inline-flex; flex-wrap: wrap; max-height: 22vh; overflow-y: scroll; height: auto; overflow-x: hidden;">
                <a class="selectedFilter" *ngFor="let item of selectedFilters;  let i = index" [style.background-color]="item.color" [value]="item.key" (click)="removeFilter(item.aggsName, item.key, item.filterID);">
                    <i>{{item.key}}</i></a>
            </div>
            </div>
            <div *ngIf="!openDocument && gotMetadata && selectedFiltersX.length > 0"> <!--style="padding: 10px 10px 10px 0px; display: inline-flex; flex-wrap: wrap; height: 40px;"-->
              <div style="height: 50px; background-color: #d9eaeb; padding-top: 12px; border-radius: 0.3em;">
                  <span *ngIf="showFiltersX" style="font-size: medium; font-style: italic; padding-left: 10px; color: chocolate;">{{ 'xclude' | loc }}</span>
              </div>
            <div class="selectFilterArea" style="padding: 10px 10px 10px 0px; display: inline-flex; flex-wrap: wrap; max-height: 22vh; overflow-y: scroll; height: auto; overflow-x: hidden;">
                <a class="selectedFilter" *ngFor="let item of selectedFiltersX;  let i = index" [style.background-color]="item.color" [value]="item.key" (click)="removeFilterX(item.aggsName, item.key, item.filterID);">
                    <i>{{item.key}}</i></a>
            </div>
              </div>
            <div style="height: 50px; background-color: #d9eaeb; padding-top: 12px; border-radius: 0.3em;">
                <span style="font-size: medium; font-style: italic; padding-left: 10px; color: chocolate">{{ 'applyFilter' | loc }}</span>
            </div>
            <!-- <a class="basicF" *ngFor="let item of filterDataBasic; let i = index" style="padding: 0px 0px 0px 0px; margin-right: 15px; border: 0px; display: grid;"></a> -->
          <div *ngFor="let item of filterDataBasic; let i = index" style="padding-bottom: 10px; border: 0.5px solid #eeeeee">
            <mat-accordion>
                <mat-expansion-panel style="border-radius: 0.3em;">
                    <mat-expansion-panel-header style="height: 50px; padding: 0px; background-color: #F8F9F9;">
                      <mat-panel-title style="padding-left: 12px;">
                          <!-- {{ item.id.charAt(0).toUpperCase()+item.id.substring(1) }} -->
                          {{ item.id | loc}}
                      </mat-panel-title>
                    </mat-expansion-panel-header>
                    <!-- <div class="extraInput" style="padding: 4px 4px 4px 4px; display: inline-flex; height: 40px;">
                      <mat-form-field appearance="outline" style="width: 160px; max-width:200px; padding-top: 0px; border: 0.5px solid #ddd; border-radius: 4px;">
                        <input [(ngModel)]="searchTextX" matInput minlength="2" style="background-color: transparent;"  (keyup)="onSearchTextX(filterDataBasicX[i]['id'])" placeholder="" #input>
                      </mat-form-field>
                      <button class="closeButton" style="padding: 0px 15px;" mat-button (click)="addAllFilter(filterDataBasic[i]['id'])">{{ 'selectAll' | loc }}</button>
                      <button class="closeButton" mat-button (click)="removeAllFilter(filterDataBasic[i]['id'])">{{ 'selectNone' | loc }}</button>
                    </div> -->
                    <div class="text_annotations_list" style="display: grid;">
                      <div style="overflow: auto;">
                        <div class="exclude-option" style="padding: 10px 10px 10px 15px;">
                          <i-bs title="Exclude" style="color: red;" name="x-square-fill" width="20" height="20"></i-bs>
                        </div>
                        <div class="include-option" style="padding: 10px 10px 10px 15px;">
                          <i-bs title="Include" style="color: green;" name="check-square-fill" width="20" height="20"></i-bs>
                        </div>
                        <div class="data-option" style="padding-right: 10px;">
                          <button class="closeButtonX" mat-button (click)="sortName(filterDataBasic[i]['id'])" style="margin-left: 30px;">
                            <span>{{ 'name' | loc }}</span>
                            <i-bs style="margin-left: 4px;" name="arrow-down-up" width="16" height="16"></i-bs>
                          </button>
                          <button class="closeButtonX" mat-button (click)="sortCount(filterDataBasic[i]['id'])" style="float: right">
                            <span>{{ 'frequency' | loc }}</span>
                            <i-bs style="margin-left: 4px;" name="arrow-down-up" width="16" height="16"></i-bs>
                          </button>
                        </div>
                      </div>
                      
                      <!-- <div style="width: 100%; float:left;">
                        <button class="closeButtonX" mat-button (click)="sortName(filterDataBasic[i]['id'])" style="margin-left: 40px;">
                          <span>{{ 'name' | loc }}</span>
                          <i-bs style="margin-left: 10px;" name="arrow-down-up" width="16" height="16"></i-bs>
                        </button>
                        <button class="closeButtonX" mat-button (click)="sortCount(filterDataBasic[i]['id'])">
                          <span>{{ 'frequency' | loc }}</span>
                          <i-bs style="margin-left: 10px;" name="arrow-down-up" width="16" height="16"></i-bs>
                        </button>
                        <button class="closeButtonX" mat-button>
                          <i-bs style="margin-left: 10px; float: right" name="arrow-down-up" width="16" height="16"></i-bs>
                        </button>
                        <button class="closeButtonX" mat-button>
                          <i-bs style="margin-left: 10px; float: right" name="arrow-down-up" width="16" height="16"></i-bs>
                        </button>
                      </div> -->

                      <div  style="overflow:auto">
                        <div class="exclude-option">
                          <mat-selection-list [formControl]="collectControlX.controls[i]" multiple  style="height: auto; max-height: 20.2vh;">
                            <mat-list-option checkboxPosition="before" *ngFor="let topping of filterDataBasic[i]['data'].buckets" [value]="topping.key" (click)="selectChange($event, 'exclude', filterDataBasic[i]['id'], topping.key)">
                            </mat-list-option>
                        </mat-selection-list>
                        </div>
                        <div class="include-option">
                          <mat-selection-list [formControl]="collectControl.controls[i]" multiple  style="height: auto; max-height: 20.2vh;">
                            <mat-list-option checkboxPosition="before" *ngFor="let topping of filterDataBasic[i]['data'].buckets" [value]="topping.key" (click)="selectChange($event, 'include', filterDataBasic[i]['id'], topping.key)">
                            </mat-list-option>
                        </mat-selection-list>
                        </div>
                        <div class="data-option">
                          <mat-selection-list style="height: auto; max-height: 20.2vh;">
                            <mat-list-option checkboxPosition="before" *ngFor="let topping of filterDataBasic[i]['data'].buckets" [value]="topping.key">
                                <span style="color: steelblue;">{{topping.key}}</span><span style="color: steelblue; float: right;">({{topping.doc_count}})</span>
                            </mat-list-option>
                        </mat-selection-list>
                        </div>
                      </div>
                      
                      <!--<div>
                        <!- <mat-checkbox (change)="onChange($event, filterDataBasic[i]['id'])" [(ngModel)]="collectX[i]" class="example-margin" style="margin-left: 16px;"></mat-checkbox> ->
                        <button class="closeButtonX" mat-button (click)="sortName(filterDataBasic[i]['id'])" style="margin-left: 40px;"><span>{{ 'name' | loc }}</span><i-bs style="margin-left: 10px;" name="arrow-down-up"
                          width="16"
                            height="16">
              </i-bs></button>
                        <button class="closeButtonX" mat-button (click)="sortCount(filterDataBasic[i]['id'])" style="float: right; margin-right: 10px;"><span>{{ 'frequency' | loc }}</span><i-bs style="margin-left: 10px;" name="arrow-down-up"
                          width="16"
                            height="16">
              </i-bs></button>
                      </div>
                      <mat-selection-list [formControl]="collectControl.controls[i]" (selectionChange)="selectChange($event)" multiple  style="overflow-y: scroll; height: auto; max-height: 20.2vh; overflow-x: hidden;">
                          <mat-list-option checkboxPosition="before" *ngFor="let topping of filterDataBasic[i]['data'].buckets" [value]="topping.key">
                              <span style="color: steelblue;">{{topping.key}}</span><span style="color: steelblue; float: right;">({{topping.doc_count}})</span>
                          </mat-list-option>
                      </mat-selection-list>-->
                      <!-- <mat-select [formControl]="collectControl.controls[i]" (selectionChange)="selectChange($event)" multiple>
                          <mat-select-trigger>
                            {{collectControl.controls[i].value ? collectControl.controls[i].value : ''}}
                            <span *ngIf="collectControl.controls[i].value?.length > 1" class="example-additional-selection1">
                              (+{{collectControl.controls[i].value.length - 1}} {{collectControl.controls[i].value?.length === 2 ? 'other' : 'others'}})
                            </span>
                          </mat-select-trigger>
                          <mat-option *ngFor="let topping of filterDataBasic[i]['data'].buckets" [value]="topping.key">{{topping.key}}<div class="pull-right">{{topping.doc_count}}</div></mat-option> 
                        </mat-select> -->
                    </div>
                  </mat-expansion-panel>
            </mat-accordion>
          </div>
          
          <!-- <div class="col-xl-1" style="width: 10%; padding: 20px 0px 0px 10px; min-width: 10%">
            <a class="nav-link" style="background-color: lightblue;" id="simpleFilter-tab" data-toggle="dropdown" href="#simpleFilter" role="dropdown" aria-controls="simpleFilter" aria-selected="true" (click)="changeFilter('simpleFilter')">
              <mat-icon style="padding-right: 30px; font-size: 20px;">add_circle</mat-icon>{{ 'add_filter' | loc }}</a>
            <div class="dropdown-menu" aria-labelledby="simpleFilter-tab">
              <ul>
                <li class="dropdown-item" *ngFor="let item of basicFacets | keyvalue">
                  <div (click)="chooseFacet(item.key)" *ngIf="!item.value">{{item.key }}</div>
                  <div class="filter_btn btn-sm d-block text-left" *ngIf="item.value" (click)="removeFacet(item.key)">
                    <i>
                      <span class="label">{{ item.key }}&nbsp;</span>
                      <!-<span class="labelremove">Ta bort filter</span>->
                      <div class="purge_filter_button pull-right"><i class="fa fa-times-circle"></i></div>
                    </i>
                  </div>
                </li>
              </ul>
            </div>
          </div> -->
        </mat-accordion>
    </div>   
    <!-- <div class="col-xl-12" id="searchView" style="padding-left: 5px; padding-right: 0px; height: auto;">
      <div class="filters_area" *ngIf="!openDocument && gotMetadata" style="padding: 0px; border: 1px solid #ddd;">
        <div class="tab-content" id="myTabContent">
          <div class="tab-pane fade show active" id="basicFilter" role="tabpanel" aria-labelledby="basicFilter-tab" *ngIf="basicFilter"
          style="display: flex; align-items: baseline; justify-content: space-between; flex-wrap: wrap;">
            <div class="col-xl-12 filters_area1" style="padding: 4px 0px 10px 0px; display: inline-flex; height: auto;">
              <div class="col-xl-1" style="width: 10%; padding: 20px 0px 0px 10px; min-width: 10%">
                <a class="nav-link" style="background-color: lightblue;" id="simpleFilter-tab" data-toggle="dropdown" href="#simpleFilter" role="dropdown" aria-controls="simpleFilter" aria-selected="true" (click)="changeFilter('simpleFilter')">
                  <mat-icon style="padding-right: 30px; font-size: 20px;">add_circle</mat-icon>{{ 'add_filter' | loc }}</a>
                <div class="dropdown-menu" aria-labelledby="simpleFilter-tab">
                  <ul>
                    <li class="dropdown-item" *ngFor="let item of basicFacets | keyvalue">
                      <div (click)="chooseFacet(item.key)" *ngIf="!item.value">{{item.key }}</div>
                      <div class="filter_btn btn-sm d-block text-left" *ngIf="item.value" (click)="removeFacet(item.key)">
                        <i>
                          <span class="label">{{ item.key }}&nbsp;</span>
                          <!-<span class="labelremove">Ta bort filter</span>->
                          <div class="purge_filter_button pull-right"><i class="fa fa-times-circle"></i></div>
                        </i>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="col-xl-11" style="padding-top: 0px; display: inline-flex;">
                <a class="basicF" *ngFor="let item of filterDataBasic; let i = index" style="padding: 0px 0px 0px 0px; margin-right: 15px; border: 0px; display: grid;">
                    <mat-expansion-panel hideToggle expanded>
                        <mat-expansion-panel-header style="height: 50px;">
                          <mat-panel-title>
                            {{ item.id.charAt(0).toUpperCase()+item.id.substring(1) }}
                          </mat-panel-title>
                        </mat-expansion-panel-header>
                  <!- <span>{{ item.id.charAt(0).toUpperCase()+item.id.substring(1) }}</span>
                  <mat-form-field appearance="outline" class="form1"> ->
                    <!- <mat-label>{{ item.id }} </mat-label> ->
                    <mat-select [formControl]="collectControl.controls[i]" (selectionChange)="selectChange($event)" multiple>
                      <mat-select-trigger>
                        {{collectControl.controls[i].value ? collectControl.controls[i].value : ''}}
                        <span *ngIf="collectControl.controls[i].value?.length > 1" class="example-additional-selection1">
                          (+{{collectControl.controls[i].value.length - 1}} {{collectControl.controls[i].value?.length === 2 ? 'other' : 'others'}})
                        </span>
                      </mat-select-trigger>
                      <mat-option *ngFor="let topping of filterDataBasic[i]['data'].buckets" [value]="topping.key">{{topping.key}}<div class="pull-right">{{topping.doc_count}}</div></mat-option> 
                    </mat-select>
                  <!- </mat-form-field>  ->
                  </mat-expansion-panel>
                </a>
              </div>
            </div>
          </div>
          <!- <div class="tab-pane fade" id="advanceFilter" role="tabpanel" aria-labelledby="advanceFilter-tab" *ngIf="advanceFilter"
          style="display: flex; align-items: baseline; justify-content: space-between; flex-wrap: wrap;">
            <div class="col-xl-12 filters_area1" style="padding: 10px 0px 10px 0px; display: inline-flex;">
              <div class="col-xl-1" style="width: 10%; padding: 10px 0px 0px 10px; min-width: 10%">
                <a class="nav-link" style="background-color: rgb(169, 222, 117);" id="advanceFilterX-tab" data-toggle="dropdown" href="#advanceFilterX" role="dropdown" aria-controls="advanceFilterX" aria-selected="false" (click)="changeFilter('advanceFilter')">
                  <mat-icon style="padding-right: 30px; font-size: 20px;">add_circle</mat-icon>Add Filter
                </a>
                <div class="dropdown-menu" aria-labelledby="advanceFilterX-tab">
                  <ul>
                    <li class="dropdown-item" *ngFor="let item of advanceFacets | keyvalue">
                      <div (click)="chooseFacet(item.key)" *ngIf="!item.value">{{item.key }}</div>
                      <div class="filter_btn btn-sm d-block text-left" *ngIf="item.value" (click)="removeFacet(item.key)">
                        <i>
                          <span class="label">{{ item.key }}&nbsp;</span>
                          <div class="purge_filter_button pull-right"><i class="fa fa-times-circle"></i></div>
                        </i>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="col-xl-11" style="padding-top: 10px;">
                <a class="advanceF" *ngFor="let item of filterDataAdvance; let i = index" style="padding: 20px 0px 0px 0px; margin-right: 15px; border: 0px;">
                  <mat-form-field appearance="outline" class="form1">
                    <mat-label>{{ item.id }} </mat-label>
                    <mat-select [formControl]="collectControlX.controls[i]" (selectionChange)="selectChange($event)" multiple>
                      <mat-select-trigger>
                        {{collectControlX.controls[i].value ? collectControlX.controls[i].value : ''}}
                        <span *ngIf="collectControlX.controls[i].value?.length > 1" class="example-additional-selection1">
                          (+{{collectControlX.controls[i].value.length - 1}} {{collectControlX.controls[i].value?.length === 2 ? 'other' : 'others'}})
                        </span>
                      </mat-select-trigger>
                      <mat-option *ngFor="let topping of filterDataAdvance[i]['data'].buckets" [value]="topping.key">{{topping.key}}</mat-option> 
                    </mat-select>
                  </mat-form-field>
                </a>
              </div>
            </div>
          </div> ->
        </div>   
      </div>  -->
    <!-- <div class="selectFilterArea" *ngIf="!openDocument && gotMetadata && selectedFilters.length > 0" style="padding: 10px 10px 10px 0px; display: inline-flex; flex-wrap: wrap; height: 40px;">
      <a *ngIf="showFilters" style="padding: 2px 10px 0px 20px; border: 0px;">{{ 'selected_filters' | loc }}:</a>
      <a class="selectedFilter" *ngFor="let item of selectedFilters;  let i = index" [style.background-color]="item.color" [value]="item.key" (click)="removeFilter(item.aggsName, item.key, item.filterID);">
        <i>{{item.key}}</i></a>
    </div> -->
    <!-- <mat-icon>cancel</mat-icon> -->
  </div>
  